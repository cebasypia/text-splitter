# 新機能：スマート分割 (Smart Splitting) 要件定義

## 概要
従来の固定文字数での分割に加え、指定した最大文字数以内で、可能な限り改行や句点などの区切り文字で分割する機能を追加する。これにより、文章の途中で不自然に分割されることを防ぐ。

## 機能要件

### 1. スマート分割ロジック
- **入力**: 
  - `text`: 分割対象のテキスト
  - `maxChunkSize`: 1つのチャンクの最大文字数（コードポイント単位）
  - `delimiters`: 区切り文字のリスト（例: `\n`, `。`, `.`）
- **動作**:
  - 各チャンクは `maxChunkSize` を超えない範囲で、最も後ろにある区切り文字の位置で分割する。
  - 区切り文字はチャンクの**末尾に含める**。
  - `maxChunkSize` 以内に区切り文字が見つからない場合は、固定文字数（`maxChunkSize`）で分割する。
- **カスタマイズ**:
  - ユーザーが区切り文字を自由に追加・編集できるようにする。
  - デフォルトの区切り文字を設定する（例: `\n`, `。`, `.`）。

### 2. UI/UX
- **設定パネル**:
  - スマート分割の ON/OFF 切り替え（トグル）。
  - **チップ形式の区切り文字管理**: 登録済みの区切り文字をチップとして表示し、個別に削除可能。
  - **特殊文字のサポート**: `\n` (改行), `\t` (タブ) のエスケープ表記をサポート。
  - **ヘルプ機能**: 特殊文字の入力方法をガイドするポップアップを表示。
- **デフォルト設定**:
  - スマート分割: ON
  - デフォルト区切り文字: `\n`, `。`, `.`

## 技術的仕様
- **文字数カウント**: 引き続き Unicode コードポイント単位（`[...text].length`）で行う。
- **改行コード**: 処理前に `LF (\n)` に正規化された状態で行う。
- **パフォーマンス**: 長文（数万文字〜）でもブラウザがフリーズしないよう、効率的な検索アルゴリズムを使用する。

## 非機能要件
- **アクセシビリティ**: スクリーンリーダー対応やキーボード操作性を維持する。
- **レスポンシブ**: モバイル端末でも設定パネルが使いやすいレイアウトにする。
